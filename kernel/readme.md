kernel changes to implement some features
